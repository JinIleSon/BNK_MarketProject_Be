<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>product_views</title>

    <!-- âœ… CSRF ë©”íƒ€ (UI ì˜í–¥ ì—†ìŒ) -->
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,400;500&family=Noto+Serif+KR:wght@300;400&display=swap" rel="stylesheet">

    <style>
        html{ scrollbar-gutter: stable; }
        .icon-btn{ background:none; border:1px solid #000; cursor:pointer; width:40px; height:40px; display:grid; place-items:center; }

        /* Overlay */
        .overlay{ position:fixed; inset:0; background:rgba(255,255,255,.28); backdrop-filter:blur(1px); -webkit-backdrop-filter:blur(1px); opacity:0; pointer-events:none; transition:opacity .25s ease; z-index:1000; }
        .overlay.open{ opacity:1; pointer-events:auto; }

        /* Panel */
        .overlay__panel{ position:absolute; top:0; left:0; width:50vw; max-width:900px; height:100%; background:#fff; transform:translateX(-100%); transition:transform .35s ease; will-change:transform; display:flex; flex-direction:column; }
        .overlay.open .overlay__panel{ transform:translateX(0); }

        .overlay__top{ display:flex; align-items:center; gap:24px; padding:20px; }
        .overlay__close{ background:none; width:100px; height:50px; cursor:pointer; position:relative; border:none; margin-left:.3%; }
        .overlay__close::before,.overlay__close::after{ content:""; position:absolute; left:15px; right:10px; top:25px; height:2px; background:#000; }
        .overlay__close::before{ transform:rotate(45deg); } .overlay__close::after{ transform:rotate(-45deg); }

        .overlay__menu{ display:grid; grid-template-columns:180px auto; gap:24px; padding:40px 20px; font-size:16px; }
        .overlay__menu a{ text-decoration:none; color:#000; display:block; padding:8px 0; }
        .overlay__menu a[data-cat].is-active{ font-weight:700; text-decoration:underline; }

        :root{ --glass-bg:rgba(255,255,255,.55); --glass-blur:8px; }
        *{ box-sizing:border-box; }
        body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
        a{ color:inherit; text-decoration:none; }
        ul{ margin:0; padding:0; list-style:none; }

        /* Header */
        .site-header{ position:sticky; top:0; z-index:900; }
        .site-header::before{ content:""; position:absolute; inset:0; background:rgba(255,255,255,0); transition:background .4s ease; z-index:-1; pointer-events:none; }
        .site-header:hover::before{ background:rgba(255,255,255,.7); }
        .site-header .inner{ position:relative; z-index:1; display:flex; align-items:center; gap:24px; padding:16px 24px; border-bottom:1px solid #000; }

        footer a{ text-decoration:none; font-weight:300; color:#000; }

        .prev-page,.next-page{ background:#fff; border:none; width:50px; height:30px; cursor:pointer; }
        .prev-page{ margin-right:15px; } .next-page{ margin-left:15px; margin-right:3px; }

        .title-didone{ text-align:center; font-family:'Bodoni Moda','Didot','Bodoni 72','Times New Roman',serif; margin-left:45px; font-weight:400; letter-spacing:.02em; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
        .title-didone.ko{ font-family:'Noto Serif KR','Bodoni Moda',serif; font-weight:300; }

        /* ì˜¤ë¥¸ìª½ ì˜µì…˜ì…€ë ‰íŠ¸ */
        .select-box{ position:relative; display:block; width:100%; }
        .select-wrap{ position:relative; display:inline-block; width:155px; height:27px; }
        .select-wrap select{ appearance:none; -webkit-appearance:none; -moz-appearance:none; padding:0 25px 0 10px; width:100%; height:100%; box-sizing:border-box; }
        .select-wrap select::-ms-expand{ display:none; }
        .select-wrap::after{ content:"â–¼"; position:absolute; right:8px; top:50%; transform:translateY(-50%); font-size:12px; color:#000; pointer-events:none; }

        /* ìš°ì¸¡ ì„œë¸ŒíŒ¨ë„ í˜ì´ë“œ */
        #subcol{ grid-row:span 2; height:900px; position:relative; padding:0; }
        #subcol .panel{ position:absolute; inset:0; padding:20px; overflow:auto; opacity:0; transform:translateY(6px); transition:opacity .35s ease, transform .35s ease; visibility:hidden; pointer-events:none; }
        #subcol .panel.show{ opacity:1; transform:none; visibility:visible; pointer-events:auto; }
        .menu-grid{ display:grid; grid-template-columns:repeat(2,auto); column-gap:50px; row-gap:6px; padding:0; margin:0; justify-content:start; }
        .menu-grid li{ list-style:none; }
    </style>
</head>


<body th:object="${product}">
<div th:replace="~{main/header.html}"></div>

<!-- ë³¸ë¬¸ ìƒë‹¨ ê²½ë¡œ/ì œëª© -->
<div style="height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; margin:0 auto;">
    <div style="display:flex; width:100%; max-width:1270px;">
        <div style="font-size:18px; margin-right:auto;"><b>ìƒí’ˆëª©ë¡</b></div>
        <div>HOME > íŒ¨ì…˜ Â· ì˜ë¥˜ Â· ë·°í‹° > <b>ë‚¨ì„±ì˜ë¥˜</b></div>
    </div>
    <hr style="border:none; border-top:1px solid #000; margin-bottom:40px; width:100%; max-width:1270px;">

    <!-- 2-ì»¬ëŸ¼: ì¢Œ ì´ë¯¸ì§€ / ìš° ì •ë³´ -->
    <div style="display:flex; gap:100px; width:1270px;">
        <!-- ë©”ì¸ ì´ë¯¸ì§€ -->
        <img id="mainImage"
             style="width:700px; height:700px; object-fit:contain; background:#f3f3f3;"
             alt="ë©”ì¸ ì´ë¯¸ì§€"
             th:with="mi=*{mainImage}"
             th:src="${mi} != null ? @{|/${mi}|} : @{/images/placeholder.png}"/>

        <!-- ìš°ì¸¡ íŒ¨ë„ -->
        <div style="width:463px; margin-top:100px;">
            <div style="margin-top:10px;">
                <span style="font-size:14px; font-weight:800; letter-spacing:-1px; color:gray;"
                      th:text="|ìƒí’ˆë²ˆí˜¸ : *{product_code}|">ìƒí’ˆë²ˆí˜¸</span>

                <span style="float:right; font-weight:800;"
                      th:with="bn=*{brand_name}"
                      th:text="${bn != null ? bn : '(ì£¼)ìƒí˜¸ëª…'}">(ì£¼)ìƒí˜¸ëª…</span>
            </div>

            <hr style="border:none; border-top:1px solid #ddd;">
            <div>
                <span style="font-weight:800;" th:text="*{product_name}">ìƒí’ˆëª…</span>
                <span style="float:right;">
                    <span th:with="avg=${product.rating_avg} ?: 0.0"
                          th:text="${#numbers.formatDecimal(avg,1,1)}">0.0</span>
                    <a href="#"
                       style="text-decoration-line:underline; color:blue;"
                       th:text="'ìƒí’ˆí‰ë³´ê¸°'">ìƒí’ˆí‰ë³´ê¸°</a>
                </span>
            </div>

            <hr style="border:none; border-top:1px solid #ddd;">
            <div style="display:flex; align-items:center;">
                <span style="color:gray;"
                      th:with="p=*{price}">
                    <s th:text="|â‚© ${#numbers.formatInteger(p != null ? p : 0,3,'COMMA')}|">â‚© 150,000</s>
                </span>
                <font color="red" th:if="*{discount_rate} > 0"
                      th:text="|&nbsp;&nbsp;*{discount_rate}%â†“|">&nbsp;&nbsp;10%â†“</font>
                <a href="#"><div style="border:1px red solid; color:red; margin-left:23px; margin-right:28px; font-size:12px;">ì¿ í°ë°›ê¸°</div></a>
                <span>ğŸ’³ë¬´ì´ìí• ë¶€ ğŸ’³ì¹´ë“œì¶”ê°€í˜œíƒ</span>
            </div>

            <!-- íŒë§¤ê°€(=ë‹¨ê°€) í‘œì‹œ + JSìš© data-unit ì£¼ì… -->
            <span id="priceLabel"
                  th:with="sp=*{sale_price}, pp=*{price}, unit=${sp != null ? sp : (pp != null ? pp : 0)}"
                  th:attr="data-unit=${unit}"
                  style="font-size:18px;"
                  th:text="|â‚© ${#numbers.formatInteger(unit,3,'COMMA')}|">â‚© 135,000</span>

            <hr style="border:none; border-top:1px solid #ddd;">
            <div>
                <span style="color:#84a9e2;" th:if="*{delichar} == 0">ë¬´ë£Œë°°ì†¡</span>
                <span style="color:#84a9e2;" th:if="*{delichar} != 0"
                      th:with="dc=*{delichar}"
                      th:text="|ë°°ì†¡ë¹„ â‚© ${#numbers.formatInteger(dc != null ? dc : 0,3,'COMMA')}|">ë°°ì†¡ë¹„</span>
                <span style="font-weight:600;" th:text="|&nbsp; *{created_at} ë“±ë¡|">&nbsp; ë“±ë¡ì¼</span>
                <br>
                <span style="display:block; padding-top:4px; font-size:14px; font-weight:600; color:gray; letter-spacing:-1px;">ë³¸ìƒí’ˆì€ êµ­ë‚´ë°°ì†¡ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</span>
            </div>

            <hr style="border:none; border-top:1px solid #ddd;">
            <span style="letter-spacing:-1px;">ì›ì‚°ì§€ - ìƒì„¸ì„¤ëª… ì°¸ê³ </span>
            <hr style="border:none; border-top:1px solid #ddd;">

            <!-- ì˜µì…˜/ìˆ˜ëŸ‰ -->
            <div class="select-box">
                <form action="" method="" onsubmit="return false;">
                    <!-- âœ… productId íˆë“ (í•„ìˆ˜ íŒŒë¼ë¯¸í„°) -->
                    <input type="hidden" name="productId" th:value="*{id}"/>

                    <div class="select-wrap">
                        <!-- âœ… ì„œë²„ ê¸°ëŒ€ íŒŒë¼ë¯¸í„°: optionId -->
                        <select name="optionId" id="optionSelect" style="width:155px; height:27px; border:1px solid #ddd;"
                                th:with="opts=*{options}">
                            <option value="">ì„ íƒí•˜ê¸°</option>
                            <option th:each="op : ${opts != null ? opts : #lists.list()}"
                                    th:if="${op != null}"
                                    th:value="${op.id}"
                                    th:text="${op.optionName}">ì˜µì…˜</option>
                        </select>
                    </div>

                    <hr style="border:none; border-top:1px solid #ddd;">
                    <span style="display:block; margin-bottom:5px; font-size:12px;" th:text="*{product_name}">ì„ íƒí•œ ìƒí’ˆëª…</span>

                    <div style="display:flex;">
                        <button type="button" onclick="decrease()" style="width:23px; height:25px; background:#f1f2f4; border:1px solid #f1f2f4;">-</button>
                        <div id="number" style="font-weight:800; font-size:10px; display:flex; width:30px; height:25px; border:1px solid #f1f2f4; justify-content:center; align-items:center;">1</div>
                        <button type="button" onclick="increase()" style="width:23px; height:25px; background:#f1f2f4; border:1px solid #f1f2f4;">+</button>

                        <div id="linePrice" style="display:flex; align-items:center; margin-left:auto; font-size:12px;"
                             th:with="sp=*{sale_price}, pp=*{price}, unit=${sp != null ? sp : (pp != null ? pp : 0)}"
                             th:text="${#numbers.formatInteger(unit,3,'COMMA')}">135,000</div>
                        <button type="button" style="border:none; background:#fff;">X</button>
                    </div>

                    <div id="totalPrice" style="float:right; font-size:14px; font-weight:600; margin-top:7px;"
                         th:with="sp=*{sale_price}, pp=*{price}, unit=${sp != null ? sp : (pp != null ? pp : 0)}"
                         th:text="|ì´ ìƒí’ˆê¸ˆì•¡ â‚© ${#numbers.formatInteger(unit,3,'COMMA')}|">ì´ ìƒí’ˆê¸ˆì•¡ â‚© 135,000</div>

                    <br>
                    <div style="display:flex; width:100%; gap:10px; margin-top:10px;">
                        <!-- âœ… ì»¨íŠ¸ë¡¤ëŸ¬ ì—°ë™ -->
                        <button type="button"
                                onclick="addToCart()"
                                style="color:#fff; height:35px; background:#bfbfbf; border:none; font-size:13px; font-weight:300; width:47%;">ì¥ë°”êµ¬ë‹ˆ</button>
                        <button type="button"
                                onclick="buyNow()"
                                style="margin-left:auto; color:#fff; background:#5e8fd7; border:none; font-size:13px; font-weight:300; width:47%;">êµ¬ë§¤í•˜ê¸°</button>
                    </div>

                    <div style="width:100%; height:64px; background:gray; margin-top:5px;">ë°°ë„ˆ ê´‘ê³  ì´ë¯¸ì§€ í•„ìš”</div>
                </form>
            </div>

            <!-- ì»¨íŠ¸ë¡¤ëŸ¬ ì—°ë™ìš© ì„ì‹œ ì‘ì—…-->
            <script>
                // === ì—”ë“œí¬ì¸íŠ¸ ===
                const ADD_TO_CART_URL = '/NICHIYA/product/cart';
                const ADD_AND_GO_URL  = '/NICHIYA/product/cart/add-and-go';
                const CART_PAGE_URL   = '/NICHIYA/product/cart';

                // === CSRF: meta ìš°ì„ , ì—†ìœ¼ë©´ ì¿ í‚¤(XSRF-TOKEN)ì—ì„œ ===
                function readMeta(name){
                    const el = document.querySelector(`meta[name="${name}"]`);
                    return el ? el.content : null;
                }
                function readCookie(name){
                    const m = document.cookie.match(new RegExp('(?:^|; )' + name + '=([^;]*)'));
                    return m ? decodeURIComponent(m[1]) : null;
                }
                function getCsrf(){
                    // meta(_csrf.headerName/_csrf.token)ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ ì‚¬ìš©
                    const headerName = readMeta('_csrf_header') || 'X-XSRF-TOKEN';
                    const token      = readMeta('_csrf')        || readCookie('XSRF-TOKEN');
                    return { headerName, token };
                }

                // === ê°’ ì½ê¸° ===
                function readQty(){
                    const t = document.getElementById('number')?.innerText?.trim();
                    const n = Number(t);
                    return Number.isFinite(n) && n > 0 ? n : 1;
                }
                function readOptionId(){
                    const sel = document.getElementById('optionSelect');
                    return sel ? (sel.value || '') : '';
                }
                function hasOptions(){
                    const sel = document.getElementById('optionSelect');
                    return !!sel && sel.options && sel.options.length > 1;
                }
                function readProductId(){
                    const el = document.querySelector('input[name="productId"]');
                    return el ? el.value : '';
                }

                // === UX í† ìŠ¤íŠ¸(ê°„ë‹¨) ===
                function toast(msg, danger){
                    const t = document.createElement('div');
                    t.textContent = msg;
                    t.style.cssText = `
    position:fixed; right:16px; bottom:16px; z-index:2000;
    padding:10px 14px; border-radius:8px; color:#fff;
    background:${danger ? '#d64545' : '#333'};
    box-shadow:0 6px 14px rgba(0,0,0,.15); font-size:14px;
    opacity:.96; transform:translateY(10px); transition:transform .18s ease;`;
                    document.body.appendChild(t);
                    requestAnimationFrame(()=> t.style.transform='translateY(0)');
                    setTimeout(()=>{ t.style.transform='translateY(10px)'; setTimeout(()=> t.remove(), 150); }, 1500);
                }

                // === íŒŒë¼ë¯¸í„° êµ¬ì„± ===
                function buildParams(){
                    const p = new URLSearchParams();
                    p.append('productId', readProductId());
                    const opt = readOptionId();
                    if (opt) p.append('optionId', opt);
                    p.append('qty', String(readQty()));
                    return p;
                }

                // === ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° (AJAX) ===
                async function addToCart(){
                    if (hasOptions() && !readOptionId()){
                        toast('ì˜µì…˜ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.', true);
                        document.getElementById('optionSelect')?.focus();
                        return;
                    }
                    const { headerName, token } = getCsrf();
                    try{
                        const res = await fetch(ADD_TO_CART_URL, {
                            method: 'POST',
                            headers: {
                                'Content-Type':'application/x-www-form-urlencoded;charset=UTF-8',
                                ...(token ? { [headerName]: token } : {})
                            },
                            body: buildParams().toString()
                        });
                        if (!res.ok) throw new Error(`HTTP ${res.status}`);
                        const json = await res.json();
                        // í—¤ë” ì¹´ìš´íŠ¸ ê°±ì‹  (ìˆìœ¼ë©´)
                        const link = document.getElementById('basketCountLink');
                        if (link && typeof json.itemCount === 'number'){
                            link.textContent = `ë°”ìŠ¤ì¼“ë°± [${json.itemCount}]`;
                        }
                        toast('ì¥ë°”êµ¬ë‹ˆì— ë‹´ì•˜ìŠµë‹ˆë‹¤.');
                    }catch(e){
                        console.error(e);
                        toast('ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ì‹¤íŒ¨. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.', true);
                    }
                }

                // === êµ¬ë§¤í•˜ê¸° (POST í›„ ì„œë²„ ë¦¬ë‹¤ì´ë ‰íŠ¸) ===
                function buyNow(){
                    if (hasOptions() && !readOptionId()){
                        toast('ì˜µì…˜ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.', true);
                        document.getElementById('optionSelect')?.focus();
                        return;
                    }
                    const { token } = getCsrf();
                    const params = buildParams();

                    // í‘œì¤€ form POST â†’ ì„œë²„ redirect ë”°ë¼ê°€ì„œ ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ ì§„ì…
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = ADD_AND_GO_URL;

                    // CSRF íˆë“ 
                    if (token){
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = '_csrf'; // CookieCsrfTokenRepoëŠ” í—¤ë”ë¡œ ë³´ë‚´ì§€ë§Œ, ì„œë²„ê°€ íˆë“  í•„ë“œëª…ì€ ë¬´ì‹œ â†’ ë°©ì–´ìš©
                        input.value = token;
                        // â†‘ ëŒ€ë¶€ë¶„ ë¶ˆí•„ìš”í•˜ì§€ë§Œ í™˜ê²½ì— ë”°ë¼ ìœ ìš©. í™•ì‹¤íˆ í•˜ë ¤ë©´ ì•„ë˜ì²˜ëŸ¼ í‘œì¤€ëª…ë„ í•¨ê»˜ ë„£ê¸°:
                        // input.name = '_csrf';
                        form.appendChild(input);
                    }

                    for (const [k,v] of params.entries()){
                        const el = document.createElement('input');
                        el.type = 'hidden';
                        el.name = k;
                        el.value = v;
                        form.appendChild(el);
                    }
                    document.body.appendChild(form);
                    form.submit();
                }

                // ì „ì—­ì— ë…¸ì¶œ (ë²„íŠ¼ onclickì—ì„œ ì‚¬ìš©)
                window.addToCart = addToCart;
                window.buyNow = buyNow;
            </script>

            <!-- ì¸ë„¤ì¼ -->
            <div style="display:flex; gap:8px; margin-top:12px;" th:with="imgs=*{subImages}">
                <img th:each="img : ${imgs != null ? imgs : #lists.list()}"
                     th:src="${img} != null ? @{|/${img}|} : @{/images/placeholder.png}"
                     alt="" style="width:80px; height:80px; object-fit:cover; border:1px solid #ddd; cursor:pointer;"
                     onclick="swapMain(this)">
            </div>

            <!-- ìˆ˜ëŸ‰/ì´ë¯¸ì§€ êµì²´ ìŠ¤í¬ë¦½íŠ¸ (UI ìœ ì§€) -->
            <script>
                const unitPrice = (() => { const el=document.getElementById('priceLabel'); const raw=el?.dataset?.unit ?? '0'; return Number(raw)||0; })();
                let count=1; const min=1, max=100;
                const formatKRW=n=>n.toLocaleString('ko-KR');
                function render(){ const q=document.getElementById('number'), l=document.getElementById('linePrice'), t=document.getElementById('totalPrice'); const sub=unitPrice*count; if(q) q.innerText=String(count); if(l) l.textContent=formatKRW(sub); if(t) t.textContent=`ì´ ìƒí’ˆê¸ˆì•¡ â‚© ${formatKRW(sub)}`; }
                function increase(){ if(count<max){ count++; render(); } }
                function decrease(){ if(count>min){ count--; render(); } }
                window.increase=increase; window.decrease=decrease;
                function swapMain(th){ const main=document.getElementById('mainImage'); if(main && th && th.src){ main.src=th.src; } }
                window.swapMain=swapMain;
                render();
            </script>
        </div><!-- /ìš°ì¸¡ íŒ¨ë„ -->
    </div><!-- /2-ì»¬ëŸ¼ ë˜í¼ -->

    <!-- ì „í­ ìƒí’ˆì •ë³´/ë¦¬ë·° ì„¹ì…˜ -->
    <div style="width:1265px; margin-top:5px; margin-bottom:5px;">
        <span style="font-size:16px; font-weight:600; display:block;">ìƒí’ˆì •ë³´</span>
        <hr style="border:none; border-top:1px solid #ddd;">
        <div style="background:gray; color:black; height:300px; margin-top:5px;">
            <img src="#" alt="ì´ë¯¸ì§€ ë„£ê¸°" style="width:100%">
        </div>

        <div style="display:flex; margin-top:5px; margin-bottom:5px;">
            <div style="letter-spacing:-1px; font-size:16px; font-weight:600;">ìƒí’ˆì •ë³´ ì œê³µê³ ì‹œ</div>
            <div style="letter-spacing:-1px; font-size:14px; color:gray; margin-left:20px; padding-top:4px;">[ì „ììƒê±°ë˜ì— ê´€í•œ ìƒí’ˆì •ë³´ ì œê³µì— ê´€í•œ ê³ ì‹œ] í•­ëª©ì— ì˜ê±° ë“±ë¡ëœ ì •ë³´ì…ë‹ˆë‹¤.</div>
        </div>

        <hr style="border:none; border-top:1px solid #ddd;">
        <table style="border-collapse:collapse; border:1px solid; width:1252px; font-size:14px; margin-left:7px;">
            <tr style="border:1px solid; height:35px;">
                <td style="border-right:1px solid; width:250px; padding-left:11px;">ìƒí’ˆë²ˆí˜¸</td>
                <td style="padding-left:11px;" th:text="*{product_code}">10010118412</td>
            </tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ìƒí’ˆìƒíƒœ</td><td style="padding-left:11px;">ìƒˆìƒí’ˆ</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ë¶€ê°€ì„¸ë©´ì„¸ì—¬ë¶€</td><td style="padding-left:11px;">ê³¼ì„¸ìƒí’ˆ</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì˜ìˆ˜ì¦ë°œí–‰</td><td style="padding-left:11px;">ë°œí–‰ê°€ëŠ¥ì‹ ìš©ì¹´ë“œì „í‘œ, ì˜¨ë¼ì¸í˜„ê¸ˆì˜ìˆ˜ì¦</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì‚¬ì—…ìêµ¬ë¶„</td><td style="padding-left:11px;">í†µì‹ íŒë§¤ì—…ì</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ë¸Œëœë“œ</td><td style="padding-left:11px;" th:text="*{brand_name}">ë¸Œëœë“œëª…</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì›ì‚°ì§€</td><td style="padding-left:11px;">êµ­ë‚´ìƒì‚°</td></tr>
        </table>

        <hr style="border:none; border-top:1px solid #ddd; margin-top:2px; margin-bottom:2px;">
        <table style="border-collapse:collapse; border:1px solid; width:1252px; font-size:14px; margin-left:7px;">
            <tr style="border:1px solid;"><td style="border-right:1px solid; width:250px; height:35px; padding-left:11px;">ì œì¡°ì / ìˆ˜ì…êµ­</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì œì¡°êµ­</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì·¨ê¸‰ ì‹œ ì£¼ì˜ì‚¬í•­</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì œì¡°ì—°ì›”</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">í’ˆì§ˆë³´ì¦ê¸°ì¤€</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">A/S ì±…ì„ì</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
            <tr style="border:1px solid; height:35px;"><td style="border-right:1px solid; padding-left:11px;">ì „í™”ë²ˆí˜¸</td><td style="padding-left:11px;">ìƒì„¸ì •ë³´ ì§ì ‘ì…ë ¥</td></tr>
        </table>

        <div th:with="rp=${reviewPage}">
            <!-- ë¦¬ë·°ë“¤ -->
            <div th:each="rv : ${rp != null ? rp.dtoList : T(java.util.Collections).emptyList()}">
                <div th:with="r=${rv?.rating} ?: 0"
                     th:text="${#strings.repeat('â˜…', r)} + ${#strings.repeat('â˜†', 5 - r)}">â˜…â˜…â˜…â˜…â˜†
                </div>

                <div style="margin-top:10px;">
                    <span th:text="*{product_name}">ìƒí’ˆëª…</span>
                    <span style="float:right;"
                          th:text="|${rv?.user_id} ${rv?.created_at}|">someId 2025-10-13</span>
                </div>

                <div style="margin-top:10px;">
                    <div style="display:flex; margin-top:5px;">
                        <div style="width:135px; height:75px; background:gray;"></div>
                        <div style="margin-left:15px; color:gray; letter-spacing:0;"
                             th:text="${rv?.content}">ë¦¬ë·° ë‚´ìš©</div>
                    </div>
                </div>
                <hr style="border:none; border-top:1px solid #ddd; margin-top:13px;">
            </div>

            <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
            <div style="height:100px; margin-top:40px; display:flex; justify-content:center;">
                <!-- ì´ì „ ë¸”ë¡ -->
                <input class="prev-page"
                       th:if="${rp != null and rp.prev}"
                       th:onclick="|location.href='@{/product/views(id=*{id}, rpg=${rp.start - 1}, rsize=${rp.size})}'|"
                       type="button" value="&lt; ì´ì „">

                <!-- ë²ˆí˜¸ë“¤ -->
                <th:block th:if="${rp != null}" th:each="num : ${#numbers.sequence(rp.start, rp.end)}">
                    <input th:class="${num == rp.pg ? 'current' : 'num'}"
                           th:onclick="|location.href='@{/product/views(id=*{id}, rpg=${num}, rsize=${rp.size})}'|"
                           th:value="${num}" type="button"/>
                </th:block>

                <!-- ë‹¤ìŒ ë¸”ë¡ -->
                <input class="next-page"
                       th:if="${rp != null and rp.next}"
                       th:onclick="|location.href='@{/product/views(id=*{id}, rpg=${rp.end + 1}, rsize=${rp.size})}'|"
                       type="button" value="ë‹¤ìŒ &gt;">
            </div>
        </div>

        <style>
            .current { border: 1px solid #333; background-color: #333; color: white; height: 30px; width: 30px; margin-right: 7px; line-height: 1; }
            .num { cursor: pointer; border: 1px solid #ddd; color: #555; height: 30px; width: 30px; margin-right: 7px; line-height: 1; }
            .euro-nav__list { max-height: 0; overflow: hidden; transition: max-height 0.15s ease; }
            .euro-nav__group.open .euro-nav__list { max-height: 500px; }
        </style>
    </div>
</div>
</div>

<div th:replace="~{main/footer.html}"></div>
</body>
</html>
