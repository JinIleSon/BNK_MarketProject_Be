
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/write.css}">
</head>
<body>
<div th:replace="~{main/header.html}"></div>

<div id="header"></div>

<div id="content" class="cs_qna_write_wrap">
    <h1>문의하기</h1>

    <div class="cs_sub_nav">
        <ul>
            <!-- 1차 카테고리 -->
            <li th:classappend="${boardType2 == 'member'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='member')}">회원</a>
            </li>
            <li th:classappend="${boardType2 == 'event'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='event')}">쿠폰/이벤트</a>
            </li>
            <li th:classappend="${boardType2 == 'pay'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='pay')}">주문/결제</a>
            </li>
            <li th:classappend="${boardType2 == 'delivery'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='delivery')}">배송</a>
            </li>
            <li th:classappend="${boardType2 == 'cancel'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='cancel')}">취소/반품/교환</a>
            </li>
            <li th:classappend="${boardType2 == 'trip'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='trip')}">여행/숙박/항공</a>
            </li>
            <li th:classappend="${boardType2 == 'safe'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='safe')}">안전거래</a>
            </li>
        </ul>

        <!-- 2차 카테고리 -->
        <ul th:if="${boardType2 == 'member'}">
            <li th:classappend="${boardType3 == 'login'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='member', boardType3='login')}">로그인</a>
            </li>
            <li th:classappend="${boardType3 == 'signup'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='member', boardType3='signup')}">가입</a>
            </li>
            <li th:classappend="${boardType3 == 'withdraw'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='member', boardType3='withdraw')}">탈퇴</a>
            </li>
            <li th:classappend="${boardType3 == 'account'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='member', boardType3='account')}">회원정보</a>
            </li>
        </ul>

        <ul th:if="${boardType2 == 'event'}">
            <li th:classappend="${boardType3 == 'couponissue'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='event', boardType3='couponissue')}">쿠폰발급</a>
            </li>
            <li th:classappend="${boardType3 == 'couponuse'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='event', boardType3='couponuse')}">쿠폰사용</a>
            </li>
            <li th:classappend="${boardType3 == 'eventjoin'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='event', boardType3='eventjoin')}">이벤트참여</a>
            </li>
            <li th:classappend="${boardType3 == 'winnercheck'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='event', boardType3='winnercheck')}">당첨확인</a>
            </li>
        </ul>

        <ul th:if="${boardType2 == 'pay'}">
            <li th:classappend="${boardType3 == 'orderguide'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='pay', boardType3='orderguide')}">주문방법</a>
            </li>
            <li th:classappend="${boardType3 == 'paymentmethod'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='pay', boardType3='paymentmethod')}">결제수단</a>
            </li>
            <li th:classappend="${boardType3 == 'paymenterror'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='pay', boardType3='paymenterror')}">결제오류</a>
            </li>
            <li th:classappend="${boardType3 == 'receipt'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='pay', boardType3='receipt')}">영수증/증빙</a>
            </li>
        </ul>

        <ul th:if="${boardType2 == 'delivery'}">
            <li th:classappend="${boardType3 == 'tracking'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='delivery', boardType3='tracking')}">배송조회</a>
            </li>
            <li th:classappend="${boardType3 == 'deliverytime'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='delivery', boardType3='deliverytime')}">배송기간</a>
            </li>
            <li th:classappend="${boardType3 == 'deliveryfee'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='delivery', boardType3='deliveryfee')}">배송비</a>
            </li>
            <li th:classappend="${boardType3 == 'globalshipping'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='delivery', boardType3='globalshipping')}">해외배송</a>
            </li>
        </ul>

        <ul th:if="${boardType2 == 'cancel'}">
            <li th:classappend="${boardType3 == 'ordercancel'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='cancel', boardType3='ordercancel')}">주문취소</a>
            </li>
            <li th:classappend="${boardType3 == 'refund'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='cancel', boardType3='refund')}">반품</a>
            </li>
            <li th:classappend="${boardType3 == 'exchange'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='cancel', boardType3='exchange')}">교환</a>
            </li>
            <li th:classappend="${boardType3 == 'refundprocess'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='cancel', boardType3='refundprocess')}">환불처리</a>
            </li>
        </ul>

        <ul th:if="${boardType2 == 'trip'}">
            <li th:classappend="${boardType3 == 'payment'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='trip', boardType3='payment')}">결제</a>
            </li>
            <li th:classappend="${boardType3 == 'reservation'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='trip', boardType3='reservation')}">예약</a>
            </li>
            <li th:classappend="${boardType3 == 'changecancel'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='trip', boardType3='changecancel')}">변경/취소</a>
            </li>
        </ul>

        <ul th:if="${boardType2 == 'safe'}">
            <li th:classappend="${boardType3 == 'security'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='safe', boardType3='security')}">보안공지</a>
            </li>
            <li th:classappend="${boardType3 == 'alert'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='safe', boardType3='alert')}">사기주의</a>
            </li>
            <li th:classappend="${boardType3 == 'safepayment'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='safe', boardType3='safepayment')}">안전결제</a>
            </li>
            <li th:classappend="${boardType3 == 'privacy'} ? 'on'">
                <a th:href="@{/cs/qna/list(boardType2='safe', boardType3='privacy')}">개인정보보호</a>
            </li>
        </ul>
    </div>

    <div class="cs_qna_write_wrap">
        <div class="qna_write_outer">
            <div class="qna_write_form">

                <form th:action="@{/cs/qna/write}" method="post">

                    <h2 id="categoryTitle"
                        style="font-size:23px; font-weight:bold; margin:0; margin-top:10px; margin-left:20px;">
                        문의유형을 선택해주세요.
                    </h2>

                    <div class="form_row" style="border-top: 3px solid #ccc; border-bottom: 1px solid #ccc">
                        <div class="inline_label">문의유형</div>

                        <div class="form_field">
                            <div class="select_group">
                                <!-- 1차 선택 -->
                                <select id="qna_type" name="boardType2"
                                        th:onchange="|window.location='@{/cs/qna/write}?boardType2=' + this.value|">
                                    <option value="" th:selected="${boardType2 == null}">1차 선택</option>
                                    <option value="member" th:selected="${boardType2 == 'member'}">회원</option>
                                    <option value="event" th:selected="${boardType2 == 'event'}">쿠폰/이벤트</option>
                                    <option value="pay" th:selected="${boardType2 == 'pay'}">주문/결제</option>
                                    <option value="delivery" th:selected="${boardType2 == 'delivery'}">배송</option>
                                    <option value="cancel" th:selected="${boardType2 == 'cancel'}">취소/반품/교환</option>
                                    <option value="trip" th:selected="${boardType2 == 'trip'}">여행/숙박/항공</option>
                                    <option value="safe" th:selected="${boardType2 == 'safe'}">안전거래</option>
                                </select>

                                <!-- 2차 선택 -->
                                <select id="qna_subtype" name="boardType3"
                                        th:onchange="|window.location='@{/cs/qna/write}?boardType2=' + document.getElementById('qna_type').value + '&boardType3=' + this.value|"
                                        required>
                                    <option value="">2차 선택</option>

                                    <th:block th:switch="${boardType2}">
                                        <!-- 회원 -->
                                        <th:block th:case="'member'">
                                            <option th:value="'login'" th:text="'로그인'" th:selected="${boardType3 == 'login'}"></option>
                                            <option th:value="'signup'" th:text="'가입'" th:selected="${boardType3 == 'signup'}"></option>
                                            <option th:value="'withdraw'" th:text="'탈퇴'" th:selected="${boardType3 == 'withdraw'}"></option>
                                            <option th:value="'account'" th:text="'회원정보'" th:selected="${boardType3 == 'account'}"></option>
                                        </th:block>

                                        <!-- 쿠폰/이벤트 -->
                                        <th:block th:case="'event'">
                                            <option th:value="'couponissue'" th:text="'쿠폰발급'" th:selected="${boardType3 == 'couponissue'}"></option>
                                            <option th:value="'couponuse'" th:text="'쿠폰사용'" th:selected="${boardType3 == 'couponuse'}"></option>
                                            <option th:value="'eventjoin'" th:text="'이벤트참여'" th:selected="${boardType3 == 'eventjoin'}"></option>
                                            <option th:value="'winnercheck'" th:text="'당첨확인'" th:selected="${boardType3 == 'winnercheck'}"></option>
                                        </th:block>

                                        <!-- 주문/결제 -->
                                        <th:block th:case="'pay'">
                                            <option th:value="'orderguide'" th:text="'주문방법'" th:selected="${boardType3 == 'orderguide'}"></option>
                                            <option th:value="'paymentmethod'" th:text="'결제수단'" th:selected="${boardType3 == 'paymentmethod'}"></option>
                                            <option th:value="'paymenterror'" th:text="'결제오류'" th:selected="${boardType3 == 'paymenterror'}"></option>
                                            <option th:value="'receipt'" th:text="'영수증/증빙'" th:selected="${boardType3 == 'receipt'}"></option>
                                        </th:block>

                                        <!-- 배송 -->
                                        <th:block th:case="'delivery'">
                                            <option th:value="'tracking'" th:text="'배송조회'" th:selected="${boardType3 == 'tracking'}"></option>
                                            <option th:value="'deliverytime'" th:text="'배송기간'" th:selected="${boardType3 == 'deliverytime'}"></option>
                                            <option th:value="'deliveryfee'" th:text="'배송비'" th:selected="${boardType3 == 'deliveryfee'}"></option>
                                            <option th:value="'globalshipping'" th:text="'해외배송'" th:selected="${boardType3 == 'globalshipping'}"></option>
                                        </th:block>

                                        <!-- 취소/반품/교환 -->
                                        <th:block th:case="'cancel'">
                                            <option th:value="'ordercancel'" th:text="'주문취소'" th:selected="${boardType3 == 'ordercancel'}"></option>
                                            <option th:value="'refund'" th:text="'반품'" th:selected="${boardType3 == 'refund'}"></option>
                                            <option th:value="'exchange'" th:text="'교환'" th:selected="${boardType3 == 'exchange'}"></option>
                                            <option th:value="'refundprocess'" th:text="'환불처리'" th:selected="${boardType3 == 'refundprocess'}"></option>
                                        </th:block>

                                        <!-- 여행/숙박/항공 -->
                                        <th:block th:case="'trip'">
                                            <option th:value="'payment'" th:text="'결제'" th:selected="${boardType3 == 'payment'}"></option>
                                            <option th:value="'reservation'" th:text="'예약'" th:selected="${boardType3 == 'reservation'}"></option>
                                            <option th:value="'changecancel'" th:text="'변경/취소'" th:selected="${boardType3 == 'changecancel'}"></option>
                                        </th:block>

                                        <!-- 안전거래 -->
                                        <th:block th:case="'safe'">
                                            <option th:value="'security'" th:text="'보안공지'" th:selected="${boardType3 == 'security'}"></option>
                                            <option th:value="'alert'" th:text="'사기주의'" th:selected="${boardType3 == 'alert'}"></option>
                                            <option th:value="'safepayment'" th:text="'안전결제'" th:selected="${boardType3 == 'safepayment'}"></option>
                                            <option th:value="'privacy'" th:text="'개인정보보호'" th:selected="${boardType3 == 'privacy'}"></option>
                                        </th:block>
                                    </th:block>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form_row">
                        <div class="inline_label">제목</div>
                        <div class="form_field">
                            <input type="text" id="qna_title" name="title" placeholder="제목을 입력해주세요.">
                        </div>
                    </div>

                    <div class="form_row" style="border-bottom: 1px solid #ccc; border-top: 1px solid #ccc; padding-top: 20px">
                        <div class="inline_label">내용</div>
                        <div class="form_field">
                            <textarea id="qna_content" name="content" placeholder="내용을 입력해주세요."></textarea>
                        </div>
                    </div>

                    <div class="qna_btn_area">
                        <a th:href="@{/cs/qna/list(boardType2=${boardType2}, boardType3=${boardType3})}"
                           class="qna_btn_cancel">취소하기</a>
                        <button type="submit" class="qna_btn_submit">등록하기</button>
                    </div>

                </form>

            </div>
        </div>
    </div>
</div>

<script>
    const subCategories = {
        member: [
            { value: "login", text: "로그인" },
            { value: "signup", text: "가입" },
            { value: "withdraw", text: "탈퇴" },
            { value: "account", text: "회원정보" },
        ],
        event: [
            { value: "couponissue", text: "쿠폰발급" },
            { value: "couponuse", text: "쿠폰사용" },
            { value: "eventjoin", text: "이벤트참여" },
            { value: "winnercheck", text: "당첨확인" },
        ],
        pay: [
            { value: "orderguide", text: "주문방법" },
            { value: "paymentmethod", text: "결제수단" },
            { value: "paymenterror", text: "결제오류" },
            { value: "receipt", text: "영수증/증빙" },
        ],
        delivery: [
            { value: "tracking", text: "배송조회" },
            { value: "deliverytime", text: "배송기간" },
            { value: "deliveryfee", text: "배송비" },
            { value: "globalshipping", text: "해외배송" },
        ],
        cancel: [
            { value: "ordercancel", text: "주문취소" },
            { value: "refund", text: "반품" },
            { value: "exchange", text: "교환" },
            { value: "refundprocess", text: "환불처리" },
        ],
        trip: [
            { value: "payment", text: "결제" },
            { value: "reservation", text: "예약" },
            { value: "changecancel", text: "변경/취소" },
        ],
        safe: [
            { value: "security", text: "보안공지" },
            { value: "alert", text: "사기주의" },
            { value: "safepayment", text: "안전결제" },
            { value: "privacy", text: "개인정보보호" },
        ],
    };

    const mainSelect = document.getElementById("qna_type");
    const subSelect  = document.getElementById("qna_subtype");

    function fillSubOptions(main) {
        subSelect.innerHTML = '<option value="">2차 선택</option>';
        (subCategories[main] || []).forEach(({value, text}) => {
            const opt = document.createElement("option");
            opt.value = value;        // ✅ 영문 코드
            opt.textContent = text;   // 표시용 한글
            subSelect.appendChild(opt);
        });
    }

    mainSelect.addEventListener("change", () => fillSubOptions(mainSelect.value));
</script>

<div id="footer"></div>
<div th:replace="~{main/footer.html}"></div>
</body>
</html>
